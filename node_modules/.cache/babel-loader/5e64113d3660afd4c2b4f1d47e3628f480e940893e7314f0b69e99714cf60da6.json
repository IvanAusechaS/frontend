{"ast":null,"code":"// frontend/src/services/api.js\nimport axios from 'axios';\nconst API_URL = 'http://127.0.0.1:8000/api/';\n\n// Configura una instancia de axios con headers por defecto\nconst api = axios.create({\n  baseURL: API_URL\n});\n\n// Interceptor para añadir el token a cada solicitud\napi.interceptors.request.use(config => {\n  const token = localStorage.getItem('token');\n  console.log('Token enviado en interceptor:', token); // Depuración\n  if (token) {\n    config.headers['Authorization'] = `Bearer ${token}`;\n  } else {\n    console.warn('No hay token en localStorage');\n  }\n  return config;\n}, error => Promise.reject(error));\n\n// Funciones que usan el interceptor\nexport const getPuntosAtencion = async () => {\n  try {\n    const response = await api.get('puntos-atencion/');\n    console.log('Respuesta de puntos-atencion:', response.data);\n    return response.data;\n  } catch (error) {\n    console.error('Error en getPuntosAtencion:', error.response ? error.response.data : error.message);\n    throw error;\n  }\n};\nexport const createTurno = async turnoData => {\n  try {\n    const response = await api.post('turnos/', turnoData);\n    console.log('Turno creado:', response.data);\n    return response.data;\n  } catch (error) {\n    console.error('Error en createTurno:', error.response ? error.response.data : error.message);\n    throw error;\n  }\n};\nexport const getTurnos = async () => {\n  try {\n    const response = await api.get('turnos/');\n    console.log('Turnos obtenidos:', response.data);\n    return response.data;\n  } catch (error) {\n    console.error('Error en getTurnos:', error.response ? error.response.data : error.message);\n    throw error;\n  }\n};\nexport const loginUser = async (cedula, password) => {\n  try {\n    const response = await api.post('login/', {\n      cedula,\n      password\n    });\n    console.log('Respuesta de login:', response.data);\n    return response.data;\n  } catch (error) {\n    console.error('Error en loginUser:', error.response ? error.response.data : error.message);\n    throw error;\n  }\n};\nexport const logoutUser = async () => {\n  console.log('Cerrando sesión solo en el frontend');\n  return Promise.resolve({\n    message: 'Sesión cerrada'\n  });\n};\nexport const registerUser = async userData => {\n  try {\n    const response = await api.post('register/', userData);\n    return response.data;\n  } catch (error) {\n    console.error('Error en registerUser:', error.response ? error.response.data : error.message);\n    throw error;\n  }\n};\nexport const updateTurno = async (turnoId, nuevoEstado) => {\n  try {\n    const response = await api.patch(`turnos/${turnoId}/`, {\n      estado: nuevoEstado\n    });\n    return response.data;\n  } catch (error) {\n    console.error('Error en updateTurno:', error.response ? error.response.data : error.message);\n    throw error;\n  }\n};\nexport const createTicket = async ticketData => {\n  try {\n    const response = await api.post('tickets/', ticketData);\n    return response.data;\n  } catch (error) {\n    console.error('Error en createTicket:', error.response ? error.response.data : error.message);\n    throw error;\n  }\n};\nexport const getUsuarios = async () => {\n  try {\n    const response = await api.get('usuarios/');\n    return response.data;\n  } catch (error) {\n    console.error('Error en getUsuarios:', error.response ? error.response.data : error.message);\n    throw error;\n  }\n};\nexport const createUsuario = async usuarioData => {\n  try {\n    const response = await api.post('usuarios/', usuarioData);\n    return response.data;\n  } catch (error) {\n    console.error('Error en createUsuario:', error.response ? error.response.data : error.message);\n    throw error;\n  }\n};\nexport const createPuntoAtencion = async puntoData => {\n  try {\n    const response = await api.post('puntos-atencion/', puntoData);\n    return response.data;\n  } catch (error) {\n    console.error('Error en createPuntoAtencion:', error.response ? error.response.data : error.message);\n    throw error;\n  }\n};\nexport const getTickets = async () => {\n  try {\n    const response = await api.get('tickets/');\n    return response.data;\n  } catch (error) {\n    console.error('Error en getTickets:', error.response ? error.response.data : error.message);\n    throw error;\n  }\n};\nexport const buscarUsuarioPorCedula = async cedula => {\n  try {\n    const response = await api.get(`buscar-usuario/${cedula}/`);\n    return response.data;\n  } catch (error) {\n    console.error('Error en buscarUsuarioPorCedula:', error.response ? error.response.data : error.message);\n    throw error;\n  }\n};\n\n// Exporta la instancia api como exportación por defecto\nexport default api;","map":{"version":3,"names":["axios","API_URL","api","create","baseURL","interceptors","request","use","config","token","localStorage","getItem","console","log","headers","warn","error","Promise","reject","getPuntosAtencion","response","get","data","message","createTurno","turnoData","post","getTurnos","loginUser","cedula","password","logoutUser","resolve","registerUser","userData","updateTurno","turnoId","nuevoEstado","patch","estado","createTicket","ticketData","getUsuarios","createUsuario","usuarioData","createPuntoAtencion","puntoData","getTickets","buscarUsuarioPorCedula"],"sources":["C:/Users/ivana/.vscode/Proyecto DSI/frontend/src/services/api.js"],"sourcesContent":["// frontend/src/services/api.js\r\nimport axios from 'axios';\r\n\r\nconst API_URL = 'http://127.0.0.1:8000/api/';\r\n\r\n// Configura una instancia de axios con headers por defecto\r\nconst api = axios.create({\r\n  baseURL: API_URL,\r\n});\r\n\r\n// Interceptor para añadir el token a cada solicitud\r\napi.interceptors.request.use(\r\n  (config) => {\r\n    const token = localStorage.getItem('token');\r\n    console.log('Token enviado en interceptor:', token); // Depuración\r\n    if (token) {\r\n      config.headers['Authorization'] = `Bearer ${token}`;\r\n    } else {\r\n      console.warn('No hay token en localStorage');\r\n    }\r\n    return config;\r\n  },\r\n  (error) => Promise.reject(error)\r\n);\r\n\r\n// Funciones que usan el interceptor\r\nexport const getPuntosAtencion = async () => {\r\n  try {\r\n    const response = await api.get('puntos-atencion/');\r\n    console.log('Respuesta de puntos-atencion:', response.data);\r\n    return response.data;\r\n  } catch (error) {\r\n    console.error('Error en getPuntosAtencion:', error.response ? error.response.data : error.message);\r\n    throw error;\r\n  }\r\n};\r\n\r\nexport const createTurno = async (turnoData) => {\r\n  try {\r\n    const response = await api.post('turnos/', turnoData);\r\n    console.log('Turno creado:', response.data);\r\n    return response.data;\r\n  } catch (error) {\r\n    console.error('Error en createTurno:', error.response ? error.response.data : error.message);\r\n    throw error;\r\n  }\r\n};\r\n\r\nexport const getTurnos = async () => {\r\n  try {\r\n    const response = await api.get('turnos/');\r\n    console.log('Turnos obtenidos:', response.data);\r\n    return response.data;\r\n  } catch (error) {\r\n    console.error('Error en getTurnos:', error.response ? error.response.data : error.message);\r\n    throw error;\r\n  }\r\n};\r\n\r\nexport const loginUser = async (cedula, password) => {\r\n  try {\r\n    const response = await api.post('login/', { cedula, password });\r\n    console.log('Respuesta de login:', response.data);\r\n    return response.data;\r\n  } catch (error) {\r\n    console.error('Error en loginUser:', error.response ? error.response.data : error.message);\r\n    throw error;\r\n  }\r\n};\r\n\r\nexport const logoutUser = async () => {\r\n  console.log('Cerrando sesión solo en el frontend');\r\n  return Promise.resolve({ message: 'Sesión cerrada' });\r\n};\r\n\r\nexport const registerUser = async (userData) => {\r\n  try {\r\n    const response = await api.post('register/', userData);\r\n    return response.data;\r\n  } catch (error) {\r\n    console.error('Error en registerUser:', error.response ? error.response.data : error.message);\r\n    throw error;\r\n  }\r\n};\r\n\r\nexport const updateTurno = async (turnoId, nuevoEstado) => {\r\n  try {\r\n    const response = await api.patch(`turnos/${turnoId}/`, { estado: nuevoEstado });\r\n    return response.data;\r\n  } catch (error) {\r\n    console.error('Error en updateTurno:', error.response ? error.response.data : error.message);\r\n    throw error;\r\n  }\r\n};\r\n\r\nexport const createTicket = async (ticketData) => {\r\n  try {\r\n    const response = await api.post('tickets/', ticketData);\r\n    return response.data;\r\n  } catch (error) {\r\n    console.error('Error en createTicket:', error.response ? error.response.data : error.message);\r\n    throw error;\r\n  }\r\n};\r\n\r\nexport const getUsuarios = async () => {\r\n  try {\r\n    const response = await api.get('usuarios/');\r\n    return response.data;\r\n  } catch (error) {\r\n    console.error('Error en getUsuarios:', error.response ? error.response.data : error.message);\r\n    throw error;\r\n  }\r\n};\r\n\r\nexport const createUsuario = async (usuarioData) => {\r\n  try {\r\n    const response = await api.post('usuarios/', usuarioData);\r\n    return response.data;\r\n  } catch (error) {\r\n    console.error('Error en createUsuario:', error.response ? error.response.data : error.message);\r\n    throw error;\r\n  }\r\n};\r\n\r\nexport const createPuntoAtencion = async (puntoData) => {\r\n  try {\r\n    const response = await api.post('puntos-atencion/', puntoData);\r\n    return response.data;\r\n  } catch (error) {\r\n    console.error('Error en createPuntoAtencion:', error.response ? error.response.data : error.message);\r\n    throw error;\r\n  }\r\n};\r\n\r\nexport const getTickets = async () => {\r\n  try {\r\n    const response = await api.get('tickets/');\r\n    return response.data;\r\n  } catch (error) {\r\n    console.error('Error en getTickets:', error.response ? error.response.data : error.message);\r\n    throw error;\r\n  }\r\n};\r\n\r\nexport const buscarUsuarioPorCedula = async (cedula) => {\r\n  try {\r\n    const response = await api.get(`buscar-usuario/${cedula}/`);\r\n    return response.data;\r\n  } catch (error) {\r\n    console.error('Error en buscarUsuarioPorCedula:', error.response ? error.response.data : error.message);\r\n    throw error;\r\n  }\r\n};\r\n\r\n// Exporta la instancia api como exportación por defecto\r\nexport default api;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}