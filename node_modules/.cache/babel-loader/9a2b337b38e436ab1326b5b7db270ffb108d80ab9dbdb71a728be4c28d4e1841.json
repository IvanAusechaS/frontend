{"ast":null,"code":"// frontend/src/components/Nav.js\nimport React,{useState,useEffect}from'react';import{useNavigate}from'react-router-dom';import{logoutUser}from'../services/api';import'./Nav.css';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const Nav=_ref=>{let{user,setUser}=_ref;const[isOpen,setIsOpen]=useState(false);const navigate=useNavigate();useEffect(()=>{console.log('Nav renderizado con user:',user);},[user]);const handleLogout=async()=>{try{const token=localStorage.getItem('token');console.log('Token al intentar cerrar sesión:',token);console.log('Usuario actual:',user);if(!token)throw new Error('No hay token disponible');await logoutUser();localStorage.removeItem('token');localStorage.removeItem('refreshToken');localStorage.removeItem('user');setUser(null);console.log('Sesión cerrada exitosamente');setIsOpen(false);navigate('/login');}catch(err){console.error('Error al cerrar sesión:',err.message||err);alert(`No se pudo cerrar sesión. Error: ${err.message||'Desconocido'}`);}};const safeUserName=user&&typeof user==='object'?user.nombre||'Usuario':'Usuario';return/*#__PURE__*/_jsx(\"nav\",{className:\"nav\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"nav-container\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"nav-logo\",onClick:()=>navigate('/'),children:\"Sistema de Turnos\"}),/*#__PURE__*/_jsx(\"button\",{className:\"nav-menu-button\",onClick:()=>setIsOpen(!isOpen),children:\"\\u2630\"}),/*#__PURE__*/_jsx(\"div\",{className:`nav-menu ${isOpen?'open':''}`,children:user?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"button\",{className:\"nav-menu-item\",onClick:()=>{navigate('/');setIsOpen(false);},children:\"Inicio\"}),user.es_profesional?/*#__PURE__*/_jsx(\"button\",{className:\"nav-menu-item\",onClick:()=>{navigate('/profesional');setIsOpen(false);},children:\"Dashboard\"}):/*#__PURE__*/_jsx(\"button\",{className:\"nav-menu-item\",onClick:()=>{navigate('/pedir-turno');setIsOpen(false);},children:\"Pedir Turno\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"nav-menu-item nav-user\",children:[\"Hola, \",safeUserName]}),/*#__PURE__*/_jsx(\"button\",{className:\"nav-menu-item\",onClick:handleLogout,children:\"Cerrar Sesi\\xF3n\"})]}):/*#__PURE__*/_jsx(\"button\",{className:\"nav-menu-item\",onClick:()=>{navigate('/login');setIsOpen(false);},children:\"Iniciar Sesi\\xF3n\"})})]})});};export default Nav;","map":{"version":3,"names":["React","useState","useEffect","useNavigate","logoutUser","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Nav","_ref","user","setUser","isOpen","setIsOpen","navigate","console","log","handleLogout","token","localStorage","getItem","Error","removeItem","err","error","message","alert","safeUserName","nombre","className","children","onClick","es_profesional"],"sources":["C:/Users/ivana/.vscode/Proyecto DSI/frontend/src/components/Nav.js"],"sourcesContent":["// frontend/src/components/Nav.js\r\nimport React, { useState, useEffect } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { logoutUser } from '../services/api';\r\nimport './Nav.css';\r\n\r\nconst Nav = ({ user, setUser }) => {\r\n  const [isOpen, setIsOpen] = useState(false);\r\n  const navigate = useNavigate();\r\n\r\n  useEffect(() => {\r\n    console.log('Nav renderizado con user:', user);\r\n  }, [user]);\r\n\r\n  const handleLogout = async () => {\r\n    try {\r\n      const token = localStorage.getItem('token');\r\n      console.log('Token al intentar cerrar sesión:', token);\r\n      console.log('Usuario actual:', user);\r\n      if (!token) throw new Error('No hay token disponible');\r\n      await logoutUser();\r\n      localStorage.removeItem('token');\r\n      localStorage.removeItem('refreshToken');\r\n      localStorage.removeItem('user');\r\n      setUser(null);\r\n      console.log('Sesión cerrada exitosamente');\r\n      setIsOpen(false);\r\n      navigate('/login');\r\n    } catch (err) {\r\n      console.error('Error al cerrar sesión:', err.message || err);\r\n      alert(`No se pudo cerrar sesión. Error: ${err.message || 'Desconocido'}`);\r\n    }\r\n  };\r\n\r\n  const safeUserName = user && typeof user === 'object' ? user.nombre || 'Usuario' : 'Usuario';\r\n\r\n  return (\r\n    <nav className=\"nav\">\r\n      <div className=\"nav-container\">\r\n        <h1 className=\"nav-logo\" onClick={() => navigate('/')}>\r\n          Sistema de Turnos\r\n        </h1>\r\n        <button className=\"nav-menu-button\" onClick={() => setIsOpen(!isOpen)}>\r\n          ☰\r\n        </button>\r\n        <div className={`nav-menu ${isOpen ? 'open' : ''}`}>\r\n          {user ? (\r\n            <>\r\n              <button\r\n                className=\"nav-menu-item\"\r\n                onClick={() => {\r\n                  navigate('/');\r\n                  setIsOpen(false);\r\n                }}\r\n              >\r\n                Inicio\r\n              </button>\r\n              {user.es_profesional ? (\r\n                <button\r\n                  className=\"nav-menu-item\"\r\n                  onClick={() => {\r\n                    navigate('/profesional');\r\n                    setIsOpen(false);\r\n                  }}\r\n                >\r\n                  Dashboard\r\n                </button>\r\n              ) : (\r\n                <button\r\n                  className=\"nav-menu-item\"\r\n                  onClick={() => {\r\n                    navigate('/pedir-turno');\r\n                    setIsOpen(false);\r\n                  }}\r\n                >\r\n                  Pedir Turno\r\n                </button>\r\n              )}\r\n              <span className=\"nav-menu-item nav-user\">\r\n                Hola, {safeUserName}\r\n              </span>\r\n              <button className=\"nav-menu-item\" onClick={handleLogout}>\r\n                Cerrar Sesión\r\n              </button>\r\n            </>\r\n          ) : (\r\n            <button\r\n              className=\"nav-menu-item\"\r\n              onClick={() => {\r\n                navigate('/login');\r\n                setIsOpen(false);\r\n              }}\r\n            >\r\n              Iniciar Sesión\r\n            </button>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </nav>\r\n  );\r\n};\r\n\r\nexport default Nav;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}