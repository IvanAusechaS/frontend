{"ast":null,"code":"// frontend/src/services/api.js\nimport axios from'axios';const API_URL='http://127.0.0.1:8000/api/';// Configura una instancia de axios con headers por defecto\nconst api=axios.create({baseURL:API_URL});// Interceptor para añadir el token a cada solicitud\napi.interceptors.request.use(config=>{const token=localStorage.getItem('token');console.log('Token enviado en interceptor:',token);// Depuración\nif(token){config.headers['Authorization']=`Bearer ${token}`;}else{console.warn('No hay token en localStorage');}return config;},error=>Promise.reject(error));// Funciones que usan el interceptor\nexport const getPuntosAtencion=async()=>{try{const response=await api.get('puntos-atencion/');console.log('Respuesta de puntos-atencion:',response.data);return response.data;}catch(error){console.error('Error en getPuntosAtencion:',error.response?error.response.data:error.message);throw error;}};export const createTurno=async turnoData=>{try{const response=await api.post('turnos/',turnoData);console.log('Turno creado:',response.data);return response.data;}catch(error){console.error('Error en createTurno:',error.response?error.response.data:error.message);throw error;}};export const getTurnos=async()=>{try{const response=await api.get('turnos/');console.log('Turnos obtenidos:',response.data);return response.data;}catch(error){console.error('Error en getTurnos:',error.response?error.response.data:error.message);throw error;}};export const loginUser=async(cedula,password)=>{try{const response=await api.post('login/',{cedula,password});console.log('Respuesta de login:',response.data);return response.data;}catch(error){console.error('Error en loginUser:',error.response?error.response.data:error.message);throw error;}};export const logoutUser=async()=>{console.log('Cerrando sesión solo en el frontend');return Promise.resolve({message:'Sesión cerrada'});};export const registerUser=async userData=>{try{const response=await api.post('register/',userData);return response.data;}catch(error){console.error('Error en registerUser:',error.response?error.response.data:error.message);throw error;}};export const updateTurno=async(turnoId,nuevoEstado)=>{try{const response=await api.patch(`turnos/${turnoId}/`,{estado:nuevoEstado});return response.data;}catch(error){console.error('Error en updateTurno:',error.response?error.response.data:error.message);throw error;}};export const createTicket=async ticketData=>{try{const response=await api.post('tickets/',ticketData);return response.data;}catch(error){console.error('Error en createTicket:',error.response?error.response.data:error.message);throw error;}};export const getUsuarios=async()=>{try{const response=await api.get('usuarios/');return response.data;}catch(error){console.error('Error en getUsuarios:',error.response?error.response.data:error.message);throw error;}};export const createUsuario=async usuarioData=>{try{const response=await api.post('usuarios/',usuarioData);return response.data;}catch(error){console.error('Error en createUsuario:',error.response?error.response.data:error.message);throw error;}};export const createPuntoAtencion=async puntoData=>{try{const response=await api.post('puntos-atencion/',puntoData);return response.data;}catch(error){console.error('Error en createPuntoAtencion:',error.response?error.response.data:error.message);throw error;}};export const getTickets=async()=>{try{const response=await api.get('tickets/');return response.data;}catch(error){console.error('Error en getTickets:',error.response?error.response.data:error.message);throw error;}};export const buscarUsuarioPorCedula=async cedula=>{try{const response=await api.get(`buscar-usuario/${cedula}/`);return response.data;}catch(error){console.error('Error en buscarUsuarioPorCedula:',error.response?error.response.data:error.message);throw error;}};// Exporta la instancia api como exportación por defecto\nexport default api;","map":{"version":3,"names":["axios","API_URL","api","create","baseURL","interceptors","request","use","config","token","localStorage","getItem","console","log","headers","warn","error","Promise","reject","getPuntosAtencion","response","get","data","message","createTurno","turnoData","post","getTurnos","loginUser","cedula","password","logoutUser","resolve","registerUser","userData","updateTurno","turnoId","nuevoEstado","patch","estado","createTicket","ticketData","getUsuarios","createUsuario","usuarioData","createPuntoAtencion","puntoData","getTickets","buscarUsuarioPorCedula"],"sources":["C:/Users/ivana/.vscode/Proyecto DSI/frontend/src/services/api.js"],"sourcesContent":["// frontend/src/services/api.js\r\nimport axios from 'axios';\r\n\r\nconst API_URL = 'http://127.0.0.1:8000/api/';\r\n\r\n// Configura una instancia de axios con headers por defecto\r\nconst api = axios.create({\r\n  baseURL: API_URL,\r\n});\r\n\r\n// Interceptor para añadir el token a cada solicitud\r\napi.interceptors.request.use(\r\n  (config) => {\r\n    const token = localStorage.getItem('token');\r\n    console.log('Token enviado en interceptor:', token); // Depuración\r\n    if (token) {\r\n      config.headers['Authorization'] = `Bearer ${token}`;\r\n    } else {\r\n      console.warn('No hay token en localStorage');\r\n    }\r\n    return config;\r\n  },\r\n  (error) => Promise.reject(error)\r\n);\r\n\r\n// Funciones que usan el interceptor\r\nexport const getPuntosAtencion = async () => {\r\n  try {\r\n    const response = await api.get('puntos-atencion/');\r\n    console.log('Respuesta de puntos-atencion:', response.data);\r\n    return response.data;\r\n  } catch (error) {\r\n    console.error('Error en getPuntosAtencion:', error.response ? error.response.data : error.message);\r\n    throw error;\r\n  }\r\n};\r\n\r\nexport const createTurno = async (turnoData) => {\r\n  try {\r\n    const response = await api.post('turnos/', turnoData);\r\n    console.log('Turno creado:', response.data);\r\n    return response.data;\r\n  } catch (error) {\r\n    console.error('Error en createTurno:', error.response ? error.response.data : error.message);\r\n    throw error;\r\n  }\r\n};\r\n\r\nexport const getTurnos = async () => {\r\n  try {\r\n    const response = await api.get('turnos/');\r\n    console.log('Turnos obtenidos:', response.data);\r\n    return response.data;\r\n  } catch (error) {\r\n    console.error('Error en getTurnos:', error.response ? error.response.data : error.message);\r\n    throw error;\r\n  }\r\n};\r\n\r\nexport const loginUser = async (cedula, password) => {\r\n  try {\r\n    const response = await api.post('login/', { cedula, password });\r\n    console.log('Respuesta de login:', response.data);\r\n    return response.data;\r\n  } catch (error) {\r\n    console.error('Error en loginUser:', error.response ? error.response.data : error.message);\r\n    throw error;\r\n  }\r\n};\r\n\r\nexport const logoutUser = async () => {\r\n  console.log('Cerrando sesión solo en el frontend');\r\n  return Promise.resolve({ message: 'Sesión cerrada' });\r\n};\r\n\r\nexport const registerUser = async (userData) => {\r\n  try {\r\n    const response = await api.post('register/', userData);\r\n    return response.data;\r\n  } catch (error) {\r\n    console.error('Error en registerUser:', error.response ? error.response.data : error.message);\r\n    throw error;\r\n  }\r\n};\r\n\r\nexport const updateTurno = async (turnoId, nuevoEstado) => {\r\n  try {\r\n    const response = await api.patch(`turnos/${turnoId}/`, { estado: nuevoEstado });\r\n    return response.data;\r\n  } catch (error) {\r\n    console.error('Error en updateTurno:', error.response ? error.response.data : error.message);\r\n    throw error;\r\n  }\r\n};\r\n\r\nexport const createTicket = async (ticketData) => {\r\n  try {\r\n    const response = await api.post('tickets/', ticketData);\r\n    return response.data;\r\n  } catch (error) {\r\n    console.error('Error en createTicket:', error.response ? error.response.data : error.message);\r\n    throw error;\r\n  }\r\n};\r\n\r\nexport const getUsuarios = async () => {\r\n  try {\r\n    const response = await api.get('usuarios/');\r\n    return response.data;\r\n  } catch (error) {\r\n    console.error('Error en getUsuarios:', error.response ? error.response.data : error.message);\r\n    throw error;\r\n  }\r\n};\r\n\r\nexport const createUsuario = async (usuarioData) => {\r\n  try {\r\n    const response = await api.post('usuarios/', usuarioData);\r\n    return response.data;\r\n  } catch (error) {\r\n    console.error('Error en createUsuario:', error.response ? error.response.data : error.message);\r\n    throw error;\r\n  }\r\n};\r\n\r\nexport const createPuntoAtencion = async (puntoData) => {\r\n  try {\r\n    const response = await api.post('puntos-atencion/', puntoData);\r\n    return response.data;\r\n  } catch (error) {\r\n    console.error('Error en createPuntoAtencion:', error.response ? error.response.data : error.message);\r\n    throw error;\r\n  }\r\n};\r\n\r\nexport const getTickets = async () => {\r\n  try {\r\n    const response = await api.get('tickets/');\r\n    return response.data;\r\n  } catch (error) {\r\n    console.error('Error en getTickets:', error.response ? error.response.data : error.message);\r\n    throw error;\r\n  }\r\n};\r\n\r\nexport const buscarUsuarioPorCedula = async (cedula) => {\r\n  try {\r\n    const response = await api.get(`buscar-usuario/${cedula}/`);\r\n    return response.data;\r\n  } catch (error) {\r\n    console.error('Error en buscarUsuarioPorCedula:', error.response ? error.response.data : error.message);\r\n    throw error;\r\n  }\r\n};\r\n\r\n// Exporta la instancia api como exportación por defecto\r\nexport default api;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}